# Story 2.2: Receipt Metadata Entry

## Status: Ready for Dev

## Story

As a user,
I want to enter details for my uploaded receipt (store, date, amount),
So that I can track my spending accurately.

## Acceptance Criteria

1. **AC1: Metadata Form** - User can enter store name, purchase date, total amount, and optional notes
2. **AC2: Default Date** - Purchase date defaults to "today"
3. **AC3: Amount Validation** - Total amount must be a positive number
4. **AC4: Required Fields** - Store, Date, and Amount are required before saving
5. **AC5: Save Action** - System saves receipt data to database linked to the uploaded image

## Dev Notes

### Technical Context

#### UI Components
- **Form:** Reuse generic Form components (Input, DatePicker?).
- **Location:** This form likely appears *immediately after* the photo upload (Story 2.1) suggests a "wizard" or two-step flow.

#### Database Interactions
- **Table:** `receipts` (insert).
- **Relationships:** `user_id` (from auth), `image_url` (from Story 2.1 upload).

#### UX Flow
1. User uploads photo (Story 2.1).
2. Upload succeeds -> Show Metadata Form (Story 2.2).
3. User fills form -> Save -> Redirect to List (Story 2.4).

### Tasks / Subtasks

- [ ] **Task 1: Form UI**
  - [ ] Component `ReceiptMetadataForm`
  - [ ] Fields: Store (text), Date (date), Amount (number), Notes (textarea)

- [ ] **Task 2: API Integration**
  - [ ] Create `POST /api/receipts` (or use Supabase client directly)
  - [ ] Insert record into `public.receipts`

- [ ] **Task 3: Validation & Error Handling**
  - [ ] Zod schema for receipt data
  - [ ] Handle database errors

## Success Criteria
✅ Data saves to DB
✅ User ID is correctly attached
✅ Invalid data is blocked
