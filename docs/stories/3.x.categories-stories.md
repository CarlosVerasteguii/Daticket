# Story 3.1: Default & Custom Categories

## Status: Ready for Dev

## Story

As a user,
I want to have default categories and create my own,
So that I can start organizing my expenses immediately.

## Acceptance Criteria

1. **AC1: Default Categories** - New users get 5 defaults (Food, Household, Personal Care, Beverages, Other)
2. **AC2: Create Category** - User can create new custom categories with Name and Color
3. **AC3: Color Picker** - User can select a color for their category
4. **AC4: Duplicate Prevention** - Prevents duplicate category names for the same user
5. **AC5: Unique-per-User** - Categories are private to the user (even defaults are copied/instantiated per user)

## Dev Notes
- **Defaults Implementation:** Use a Database Trigger on `auth.users` INSERT to populate `public.categories`. OR do it in the Registration flow (Story 1.1). *Db Trigger is more robust.*

# Story 3.4: Receipt Categorization

## Status: Ready for Dev

## Story

As a user,
I want to assign categories to my receipts,
So that I can group my spending.

## Acceptance Criteria

1. **AC1: Assignment** - User can assign one or more categories to a receipt
2. **AC2: Multi-Select UI** - Interface allows selecting multiple categories (Checkbox/Combobox)
3. **AC3: Edit Categories** - User can change categories on existing receipts (Edit view)
4. **AC4: Visual Indicators** - Assigned categories appear as colored badges on receipt views

## Dev Notes
- **Relation:** Junction table `receipt_categories` (receipt_id, category_id).
- **UI:** `CategorySelector` component.

# Story 3.5: Category-Based Filtering

## Status: Ready for Dev

## Story

As a user,
I want to filter my receipt list by category,
So that I can see how much I spent on "Food" specifically.

## Acceptance Criteria

1. **AC1: Single Filter** - Filter list by selecting one category
2. **AC2: Multi-Filter** - Filter by multiple categories (OR logic usually, or AND? PRD says "AND/ORLogic" - sticking to OR for "Show Food or Drinks" is standard UX)
3. **AC3: Filter Chips** - Active filters show as removable chips
4. **AC4: Count Display** - Filter list shows count of matches

## Dev Notes
- **Query:** `receipts` inner join `receipt_categories` -> filter by `category_id`.
